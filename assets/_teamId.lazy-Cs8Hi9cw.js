import{r as A,f as K,u as _,a as T,R as u,B as C,c as B,y as X,p as L,h as G,i as H,l as ee,z as te,t as e,x as se,s as D,N as ae,w as re,G as oe,S as ne,A as ie}from"./index-6JX3vCIA.js";import{u as le,g as ce,h as F,m as de,H as me,b as pe,e as ue,f as z,c as j,G as b,L as ge,S as E,d as U,C as R,a as he}from"./chart-QIkLih-M.js";const Q=A.createContext(null),fe=Q.Provider;function ve(){return{withinGroup:!!A.useContext(Q)}}var M={group:"m-11def92b",root:"m-f85678b6",image:"m-11f8ac07",placeholder:"m-104cd71f"};const xe={},be=B((r,{spacing:o})=>({group:{"--ag-spacing":X(o)}})),O=K((r,o)=>{const a=_("AvatarGroup",xe,r),{classNames:i,className:t,style:n,styles:m,unstyled:c,vars:f,spacing:g,...p}=a,S=T({name:"AvatarGroup",classes:M,props:a,className:t,style:n,classNames:i,styles:m,unstyled:c,vars:f,varsResolver:be,rootSelector:"group"});return u.createElement(fe,{value:!0},u.createElement(C,{ref:o,...S("group"),...p}))});O.classes=M;O.displayName="@mantine/core/AvatarGroup";function ye(r){return u.createElement("svg",{...r,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const je={},Ce=B((r,{size:o,radius:a,variant:i,gradient:t,color:n,autoContrast:m})=>{const c=r.variantColorResolver({color:n||"gray",theme:r,gradient:t,variant:i||"light",autoContrast:m});return{root:{"--avatar-size":G(o,"avatar-size"),"--avatar-radius":a===void 0?void 0:H(a),"--avatar-bg":n||i?c.background:void 0,"--avatar-color":n||i?c.color:void 0,"--avatar-bd":n||i?c.border:void 0}}}),P=L((r,o)=>{const a=_("Avatar",je,r),{classNames:i,className:t,style:n,styles:m,unstyled:c,vars:f,src:g,alt:p,radius:S,color:y,gradient:h,imageProps:d,children:x,autoContrast:s,mod:l,...v}=a,N=ve(),[I,k]=A.useState(!g),$=T({name:"Avatar",props:a,classes:M,className:t,style:n,classNames:i,styles:m,unstyled:c,vars:f,varsResolver:Ce});return A.useEffect(()=>k(!g),[g]),u.createElement(C,{...$("root"),mod:[{"within-group":N.withinGroup},l],ref:o,...v},I?u.createElement("span",{...$("placeholder"),title:p},x||u.createElement(ye,null)):u.createElement("img",{...d,...$("image"),src:g,alt:p,onError:J=>{var Y;k(!0),(Y=d==null?void 0:d.onError)==null||Y.call(d,J)}}))});P.classes=M;P.displayName="@mantine/core/Avatar";P.Group=O;var V={root:"m-347db0ec","root--dot":"m-fbd81e3d",label:"m-5add502a",section:"m-91fdda9b"};const Se={},ke=B((r,{radius:o,color:a,gradient:i,variant:t,size:n,autoContrast:m})=>{const c=r.variantColorResolver({color:a||r.primaryColor,theme:r,gradient:i,variant:t||"filled",autoContrast:m});return{root:{"--badge-height":G(n,"badge-height"),"--badge-padding-x":G(n,"badge-padding-x"),"--badge-fz":G(n,"badge-fz"),"--badge-radius":o===void 0?void 0:H(o),"--badge-bg":a||t?c.background:void 0,"--badge-color":a||t?c.color:void 0,"--badge-bd":a||t?c.border:void 0,"--badge-dot-color":t==="dot"?ee(a,r):void 0}}}),Z=L((r,o)=>{const a=_("Badge",Se,r),{classNames:i,className:t,style:n,styles:m,unstyled:c,vars:f,radius:g,color:p,gradient:S,leftSection:y,rightSection:h,children:d,variant:x,fullWidth:s,autoContrast:l,circle:v,mod:N,...I}=a,k=T({name:"Badge",props:a,classes:V,className:t,style:n,classNames:i,styles:m,unstyled:c,vars:f,varsResolver:ke});return u.createElement(C,{variant:x,mod:[{block:s,circle:v},N],...k("root",{variant:x}),ref:o,...I},y&&u.createElement("span",{...k("section"),"data-position":"left"},y),u.createElement("span",{...k("label")},d),h&&u.createElement("span",{...k("section"),"data-position":"right"},h))});Z.classes=V;Z.displayName="@mantine/core/Badge";var W={root:"m-9e117634"};const Ee={},Re=B((r,{radius:o,fit:a})=>({root:{"--image-radius":o===void 0?void 0:H(o),"--image-object-fit":a}})),q=L((r,o)=>{const a=_("Image",Ee,r),{classNames:i,className:t,style:n,styles:m,unstyled:c,vars:f,onError:g,src:p,radius:S,fit:y,fallbackSrc:h,mod:d,...x}=a,[s,l]=A.useState(!p);A.useEffect(()=>l(!p),[p]);const v=T({name:"Image",classes:W,props:a,className:t,style:n,classNames:i,styles:m,unstyled:c,vars:f,varsResolver:Re});return s&&h?u.createElement(C,{component:"img",src:h,...v("root"),onError:g,mod:["fallback",d],...x}):u.createElement(C,{component:"img",ref:o,...v("root"),src:p,onError:N=>{g==null||g(N),l(!0)},mod:d,...x})});q.classes=W;q.displayName="@mantine/core/Image";var Ae=te("arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);function w({yAxisLabel:r,values:o}){const a=le(),i=A.useMemo(()=>{const t=ce(a),n={...F,chart:{...F.chart,height:400},yAxis:{title:{text:r}},title:{text:""},series:[{type:"line",name:r,data:o,marker:{enabled:!1,symbol:"circle"}}]};return de(t,n)},[a]);return e.jsx(me,{highcharts:pe,options:i,immutable:!0})}const Ne=se("/teams/$teamId")({component:we});function we(){const{teamId:r}=Ne.useParams(),o=D(s=>s.teams),a=D(s=>s.scrimmagesByTeam),i=parseInt(r),t=o.find(s=>s.id===i);if(t===void 0)return e.jsx(ae,{to:"/"});let n=0;const m=Object.fromEntries(re.map(s=>[s,1])),c=[...o].sort((s,l)=>l.profile.rating-s.profile.rating);for(const s of c){if(s.id===t.id)break;n++;for(const l of s.eligibilities)m[l]++}const f=[["Name",t.name],["Status",ue(t.status)],["Auto-accept ranked",t.profile.auto_accept_ranked?"Yes":"No"],["Auto-accept unranked",t.profile.auto_accept_unranked?"Yes":"No"],["Has active submission",t.has_active_submission?"Yes":"No"],["Eligibility",t.eligibilities.join(", ")],["Rating",z(t.profile.rating)],["Global rank",z(n)]];for(const s of t.eligibilities)f.push([`${s} rank`,z(m[s])]);const g=t.members.map((s,l)=>e.jsxs(oe,{gap:"sm",wrap:"nowrap",children:[e.jsx(P,{src:s.profile.avatar_url||void 0,alt:`${s.username}'s avatar`}),e.jsxs(C,{children:[e.jsxs(j,{children:[s.username,s.is_staff&&e.jsx(Z,{color:"blue",size:"xs",ml:4,style:{verticalAlign:"middle"},children:"Staff"})]}),e.jsx(j,{fz:"sm",children:s.profile.school})]})]},l));let p=null;const S=[],y=[],h=[],d=[],x=a.get(t.id)||[];for(const s of x){if(s.status!=ne.Completed)continue;const l=Date.parse(s.created);if(p===null&&(p=l),l-p>24*60*60*1e3&&S.push([l,s.participants.find(v=>v.team===t.id).rating]),s.is_ranked)d.push([l,d.length+1]);else{y.push([l,y.length+1]);const v=h.length>0?h[h.length-1][1]:0;h.push([l,v+s.maps.length])}}return e.jsxs(b,{children:[e.jsx(b.Col,{span:12,children:e.jsx(ie,{component:ge,leftSection:e.jsx(Ae,{size:"1rem"}),to:"/",children:"Home"})}),e.jsx(b.Col,{span:{md:4,sm:12},children:e.jsx(E,{title:t.name,children:e.jsxs(U,{mt:t.profile.avatar_url?void 0:"sm",gap:"xs",children:[t.profile.avatar_url&&e.jsx(R.Section,{children:e.jsx(q,{src:t.profile.avatar_url,alt:"Team avatar",h:124,fit:"contain"})}),t.profile.quote&&e.jsxs(C,{children:[e.jsx(j,{children:"Quote:"}),e.jsx(j,{children:t.profile.quote})]}),t.profile.biography&&e.jsxs(C,{children:[e.jsx(j,{children:"Biography:"}),e.jsx(j,{children:t.profile.biography})]}),t.profile.avatar_url===null&&t.profile.quote.length===0&&t.profile.biography.length===0&&e.jsx(j,{children:"Team has no avatar, quote, or biography."})]})})}),e.jsx(b.Col,{span:{md:4,sm:12},children:e.jsx(E,{title:"Properties",children:e.jsx(R.Section,{children:e.jsx(he,{rows:f})})})}),e.jsx(b.Col,{span:{md:4,sm:12},children:e.jsx(E,{title:"Members",children:e.jsx(U,{mt:"sm",gap:"xs",children:g})})}),e.jsx(b.Col,{span:12,children:e.jsxs(E,{title:"Rating",children:[e.jsx(R.Section,{children:e.jsx(w,{yAxisLabel:"Rating",values:S})}),e.jsx(R.Section,{inheritPadding:!0,py:"sm",children:e.jsx(j,{children:"The first 24 hours are hidden to account for stabilization of the initial rating."})})]})}),e.jsx(b.Col,{span:12,children:e.jsx(E,{title:"Ranked scrimmages played",children:e.jsx(R.Section,{children:e.jsx(w,{yAxisLabel:"Scrimmages",values:d})})})}),e.jsx(b.Col,{span:{md:6,sm:12},children:e.jsx(E,{title:"Unranked scrimmages played",children:e.jsx(R.Section,{children:e.jsx(w,{yAxisLabel:"Scrimmages",values:y})})})}),e.jsx(b.Col,{span:{md:6,sm:12},children:e.jsx(E,{title:"Unranked matches played",children:e.jsx(R.Section,{children:e.jsx(w,{yAxisLabel:"Matches",values:h})})})})]})}export{Ne as Route,we as TeamDetailPage};
